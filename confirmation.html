<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="stylesheet" href="site.css">
  <title>Confirmed | Mallory Jane Photography</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="icon" type="image/png" href="assets/brand/favicon.png">
  <link rel="stylesheet" href="https://www.w3schools.com/w3css/5/w3.css">
</head>
<body>

<!-- Top nav -->
<div class="w3-bar w3-white w3-padding w3-card">
  <a href="index.html" class="w3-bar-item w3-button w3-padding-small">
    <img src="assets/brand/logo.png" alt="Mallory Jane Photography" style="height:28px;vertical-align:middle;">
  </a>

  <div class="w3-right w3-hide-small">
    <a href="gallery.html" class="w3-bar-item w3-button">Gallery</a>
    <a href="packages.html" class="w3-bar-item w3-button">Packages</a>
    <a href="book.html" class="w3-bar-item w3-button w3-light-grey w3-round">Book</a>
  </div>
</div>

<div class="w3-content w3-padding-large w3-margin-top" style="max-width:900px">
  <div class="w3-card w3-round w3-padding-large">
    <h2 class="w3-center">Youâ€™re Booked ðŸŽ‰</h2>
    <p class="w3-center w3-text-grey">
      A confirmation email should arrive shortly with your exact time/location details.
      If you donâ€™t see it, check spam/junk.
    </p>

    <hr>

    <h3>Booking details</h3>

    <div class="w3-responsive">
      <table class="w3-table w3-bordered">
        <tr>
          <td><b>Package</b></td>
          <td id="detail-package">â€”</td>
        </tr>
        <tr>
          <td><b>Name</b></td>
          <td id="detail-name">â€”</td>
        </tr>
        <tr>
          <td><b>Email</b></td>
          <td id="detail-email">â€”</td>
        </tr>
        <tr>
          <td><b>Date / Time</b></td>
          <td id="detail-datetime">â€”</td>
        </tr>
        <tr>
          <td><b>Timezone</b></td>
          <td id="detail-timezone">â€”</td>
        </tr>
      </table>
    </div>

    <p class="w3-text-grey w3-small w3-margin-top" id="detail-note"></p>

    <div class="w3-center w3-margin-top">
      <a href="packages.html" class="w3-button w3-light-grey w3-round w3-margin-right">View Packages</a>
      <a href="index.html" class="w3-button w3-dark-grey w3-round">Back Home</a>
    </div>

    <div class="w3-light-grey w3-round w3-padding w3-margin-top">
      <h4>What happens next?</h4>
      <ul>
        <li>Iâ€™ll reach out if we need to confirm location/timing details.</li>
        <li>Youâ€™ll receive an online gallery link after editing is complete.</li>
        <li>Questions? Email <a href="mailto:hello@malloryjanephotography.com">hello@malloryjanephotography.com</a>.</li>
      </ul>
    </div>
  </div>
</div>

<script>
  // If your Cal booking question identifier is different, update this too.
  const PACKAGE_FIELD_IDENTIFIER = "package";

  const qs = new URLSearchParams(window.location.search);

  // Package: prefer query param; fallback to localStorage from book.html
  const pkgFromQuery = qs.get(PACKAGE_FIELD_IDENTIFIER);
  let pkg = pkgFromQuery;
  try {
    if (!pkg) pkg = localStorage.getItem("mj_selected_package_label");
  } catch (e) {}

  // Cal may pass different param names depending on configuration.
  const name =
    qs.get("name") ||
    qs.get("fullName") ||
    qs.get("attendeeName") ||
    "";

  const email =
    qs.get("email") ||
    qs.get("attendeeEmail") ||
    "";

  const tz =
    qs.get("timezone") ||
    qs.get("tz") ||
    "";

  // Some systems pass startDate in ISO; weâ€™ll try to format if present.
  const startRaw =
    qs.get("startDate") ||
    qs.get("startTime") ||
    qs.get("start") ||
    "";

  function formatDateTime(raw) {
    if (!raw) return "";
    const d = new Date(raw);
    if (isNaN(d.getTime())) return raw; // if it's not ISO, just show raw
    return d.toLocaleString(undefined, { dateStyle: "full", timeStyle: "short" });
  }

  document.getElementById("detail-package").textContent = pkg || "â€”";
  document.getElementById("detail-name").textContent = name || "â€”";
  document.getElementById("detail-email").textContent = email || "â€”";
  document.getElementById("detail-datetime").textContent = formatDateTime(startRaw) || "â€”";
  document.getElementById("detail-timezone").textContent = tz || "â€”";

  // If Cal doesnâ€™t forward details, explain why gracefully
  const noteEl = document.getElementById("detail-note");
  if (!pkgFromQuery && !name && !email && !startRaw) {
    noteEl.textContent =
      "Note: Some booking details may only appear in your confirmation email (depending on what Cal forwards on redirect).";
  } else {
    noteEl.textContent = "";
  }
</script>

  <!-- CONTACT FOOTER -->
<footer class="w3-container w3-dark-grey w3-center w3-padding-32 mj-footer">
  <h3 class="mj-section-title">Contact Me</h3>
  <p>
    <a class="w3-text-white" href="mailto:mal.jane.photography@gmail.com">mal.jane.photography@gmail.com</a>
  </p>

  <div class="mj-social">
    <a href="https://www.facebook.com/profile.php?id=61570271263678" target="_blank" rel="noopener" aria-label="Facebook">
      <svg viewBox="0 0 24 24" aria-hidden="true">
        <path d="M22 12a10 10 0 1 0-11.5 9.9v-7H8v-3h2.5V9.5A3.5 3.5 0 0 1 14.2 6h2.3v3h-2.3c-.7 0-1.2.6-1.2 1.3V12H17l-.5 3h-3v7A10 10 0 0 0 22 12z"/>
      </svg>
    </a>

    <a href="https://www.instagram.com/mallory.jane_photography/" target="_blank" rel="noopener" aria-label="Instagram">
      <svg viewBox="0 0 24 24" aria-hidden="true">
        <path d="M7 2h10a5 5 0 0 1 5 5v10a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5V7a5 5 0 0 1 5-5zm10 2H7a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V7a3 3 0 0 0-3-3zm-5 4.5A5.5 5.5 0 1 1 6.5 12 5.5 5.5 0 0 1 12 8.5zm0 2A3.5 3.5 0 1 0 15.5 12 3.5 3.5 0 0 0 12 10.5zM18 6.8a1.2 1.2 0 1 1-1.2 1.2A1.2 1.2 0 0 1 18 6.8z"/>
      </svg>
    </a>
  </div>
</footer>
</body>
</html>
